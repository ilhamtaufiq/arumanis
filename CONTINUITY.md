# Continuity Ledger

- Goal: Enhance field data integrity and implement offline-first photo management.
- Constraints/Assumptions:
  - Backend uses Laravel 12 + Sanctum.
  - Frontend uses React 19 + TanStack Router.
  - GeoJSON data stored in `public/geojson/` for runtime fetching.
  - IndexedDB used for persists of offline blobs via Zustand middleware.
- Key decisions:
  - Implemented **Geo-Fencing Validation** based on Point-in-Polygon checks against village boundaries.
  - Implemented **Offline Photo Queue** allowing field supervisors to capture data without an internet connection.
  - Implemented **Image Watermarking** to automatically embed Date, Time, and GPS coordinates onto captured photos.
  - Integrated `UploadQueueManager` as a floating component for global status monitoring.
- State:
  - Done:
    - Implemented **Audit Logging System** and **Data Quality Dashboard**.
    - Implemented **Advanced Photo Features** (Geo-Fencing, Offline Queue, Watermarking).
    - Resolved TypeScript errors and improved prop flow across `PekerjaanDetail` components.
  - Now: Concluding Advanced Photo Feature implementation.
  - Next: Implement Extended User Profiles (NIP/Jabatan), Export Signature Integration, and Automatic Document Numbering System (SPPBJ/SPK/BA).
- Open questions (UNCONFIRMED if needed): None.
- Working set (files/ids/commands): [EmbeddedFotoForm.tsx](file:///c:/laragon/www/bun/src/features/pekerjaan/components/EmbeddedFotoForm.tsx), [UploadQueueManager.tsx](file:///c:/laragon/www/bun/src/components/layout/UploadQueueManager.tsx), [geo-utils.ts](file:///c:/laragon/www/bun/src/lib/geo-utils.ts).
